OBJECT Codeunit 50007 HW App RegNotification Meth
{
  OBJECT-PROPERTIES
  {
    Date=15/02/17;
    Time=[ 8:28:14];
    Modified=Yes;
    Version List=HelloWorld;
  }
  PROPERTIES
  {
    OnRun=BEGIN
          END;

  }
  CODE
  {
    VAR
      TheNotification@1000 : Notification;
      NotificationActionMsg@1002 : TextConst 'ENU=Open Registration';
      LicensePermissionsMsg@1003 : TextConst 'ENU=Please register this app to get access to this feature.';

    PROCEDURE ShowRegistrationNotification@50000();
    VAR
      Handled@50000 : Boolean;
    BEGIN
      OnBeforeShowRegistrationNotification(Handled);

      DoShowRegistrationNotification(Handled);

      OnAfterShowRegistrationNotification;
    END;

    LOCAL PROCEDURE DoShowRegistrationNotification@2(VAR Handled@50000 : Boolean);
    VAR
      HWAppClass@50001 : Codeunit 50002;
    BEGIN
      IF Handled THEN EXIT;

      IF NOT HWAppClass.HasNotificationMessage THEN
        EXIT;

      WITH TheNotification DO BEGIN
        ID := '51300ec7-4afd-4383-8e99-e0557abe0e55';
        MESSAGE := HWAppClass.GetNotificationMessage;
        SCOPE := NOTIFICATIONSCOPE::LocalScope;
        ADDACTION(NotificationActionMsg,CODEUNIT::"HW App RegNotification Meth",'OpenSetupPage');
        SEND;
      END;
    END;

    PROCEDURE OpenSetupPage@3(TheNotification@1000 : Notification);
    BEGIN
      PAGE.RUN(PAGE::"HW App Register");
    END;

    [Integration]
    LOCAL PROCEDURE OnBeforeShowRegistrationNotification@50001(VAR Handled@50000 : Boolean);
    BEGIN
    END;

    [Integration]
    LOCAL PROCEDURE OnAfterShowRegistrationNotification@50002();
    BEGIN
    END;

    BEGIN
    END.
  }
}

